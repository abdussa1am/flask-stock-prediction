{% extends "base.html" %}
{% block content %}
<style>
   body{
    background-image: linear-gradient(90deg, #ffffff, #cccecf, #9b9fa0, #6d7270, #464843);
    margin-top: 70px;
}


</style>
<div class="container">
   <h4 style="text-align: center; color: white;">Pakistan Stock Exchange Limited</h4>  
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
      </ol>
  
      <!-- Wrapper for slides -->
      <div class="carousel-inner">
        <div class="item active">
          <img src="{{ url_for('static', filename='images.jpg')}}" alt="Los Angeles" style="width:100%;">
          <div class="carousel-caption">
            <h4>INVEST IN PAKISTAN</h4>
            <h3>BUILD PAKISTAN</h3>
          </div>
        </div>
  
        <div class="item">
          <img src="{{ url_for('static', filename='0_dtiuqS8kNB66Mp5P.png')}}" alt="Chicago" style="width:100%;">
          <div class="carousel-caption">
            <h4>INVEST IN PAKISTAN</h4>
            <h3>BUILD PAKISTAN</h3>
          </div>
        </div>
      </div>
  
      <!-- Left and right controls -->
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <h2 style="text-align: center; color: white;">Registered Companies</h2>
<div class="panel panel-info">
   <!-- Default panel contents -->
   <div class="panel-heading" style="text-align: center; background-color: black; color: white; font-size: large;">MARKET SUMMARY</div>
   <div class="panel-body">
      <input class="form-control input-lg" id="myInput"  onkeyup="myFunction()" type="text" placeholder="Search Company Name... ">
      <div class="table-responsive">
      <table class="table" id="myTable" cellspacing="0" cellpadding="0">
   <thead>
     <tr>
       <th>Company</th>
       <th>Price</th>
       <th>High</th>
       <th>Low</th>
       <th>Change</th>
     </tr>
   </thead>
   <tbody >
     {% for comm in lat['response'] %}
     <tr id="tre">
        <td><a href="profile/{{ comm['id'] }}">{{comm['symbol'] }}</a></td>
        <td>{{comm['price'] }}</td>
        <td>{{comm['high'] }}</td>
        <td>{{comm['low']}}</td>
        <td><span class="asd"> {{comm['chg'] }}  &nbsp;</span><span>({{comm['chg_percent']}})</span></td>
     </tr>
     {% endfor %}
   </tbody>
 </table>
</div>
    </div>
    <div class="panel-footer">pakistan stock exchange summary</div>
  </div>
</div>


<script>
   function myFunction() {
     var input, filter, table, tr, td, i, txtValue;
     input = document.getElementById("myInput");
     filter = input.value.toUpperCase();
     table = document.getElementById("myTable");
     tr = table.getElementsByTagName("tr");
     for (i = 0; i < tr.length; i++) {
       td = tr[i].getElementsByTagName("td")[0];
       console.log(td);
       if (td) {
         txtValue = td.textContent || td.innerText;
         if (txtValue.toUpperCase().indexOf(filter) > -1) {
           tr[i].style.display = "";
         } else {
           tr[i].style.display = "none";
         }
       }       
     }
   }
   
   
   window.addEventListener("load", function(){
      asd = document.getElementsByClassName("asd");
     for (i = 0; i < asd.length; i++) {
       console.log(asd[i].nextSibling);
       next = asd[i].nextSibling;
       if(asd[i].innerText > 0){
          asd[i].style.color = 'green';
          next.setAttribute("class" , "glyphicon glyphicon-arrow-up");
          next.style.color = 'green';
         } else if(asd[i].innerText === 0.00) { 
          asd[i].style.color = 'black';
          next.style.color = 'black';
         }else{
          asd[i].style.color = 'red';
          next.setAttribute("class" , "glyphicon glyphicon-arrow-down");
          next.style.color = 'red';
       }
     }
});
 </script>
{% endblock %}