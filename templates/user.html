{% extends "base.html" %}
{% block title %}api{% endblock %}
{% block content %} 
<div class="container">
    <h2 style="text-align: center;">Pakistan Stock Exchange Limited</h2>  
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
      </ol>
  
      <!-- Wrapper for slides -->
      <div class="carousel-inner">
        <div class="item active">
          <img src="{{ url_for('static', filename='images.JPG')}}" alt="Los Angeles" style="width:100%;">
        </div>
  
        <div class="item">
          <img src="{{ url_for('static', filename='0_dtiuqS8kNB66Mp5P.PNG')}}" alt="Chicago" style="width:100%;">
        </div>
      </div>
  
      <!-- Left and right controls -->
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <br><br><br>
    <h2 style="text-align: center;">Registered Companies</h2>
    <br>
  <input class="form-control input-lg" id="myInput" onkeyup="myFunction()" type="text" placeholder="Search Company Name... ">
    <table class="table" id="myTable">
      <thead>
        <tr>
          <th>stock id</th>
          <th>Name</th>
          <th>Country</th>
        </tr>
      </thead>
      <tbody >
        {% for comm in data['response'] %}
            
        <tr>
            <!--<td><a href="http://127.0.0.1:5000/api/{{ comm['stock_id'] }}">{{comm['stock_id'] }}</a></td>!-->
            <td>{{comm['short_name'] }}</td>
            <td><a href="api/{{ comm['stock_id'] }}">{{ comm['name'] }}</a></td>
            <td>{{comm['country'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  <script>
      function myFunction() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("myTable");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td")[1];
          if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
            } else {
              tr[i].style.display = "none";
            }
          }       
        }
      }
</script>
{%- endblock %}